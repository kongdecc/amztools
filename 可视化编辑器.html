<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯è§†åŒ–HTMLç¼–è¾‘å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            min-height: 100vh;
        }

        .header {
            margin-bottom: 30px;
        }

        .title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        /* ä½œè€…ä¿¡æ¯æ ·å¼ */
        .author {
            font-size: 16px;
            color: #666;
            margin-bottom: 15px;
            font-weight: normal;
        }

        .tips {
            background-color: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            color: #1976d2;
            font-size: 14px;
        }

        .tips strong {
            font-weight: 600;
        }
        
        /* æ–°çš„æç¤ºå®¹å™¨æ ·å¼ */
        .tips-container {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .tips-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background-color: #e9ecef;
            cursor: pointer;
            user-select: none;
        }
        
        .tips-header:hover {
            background-color: #dee2e6;
        }
        
        .tips-toggle {
            font-size: 12px;
            transition: transform 0.3s;
        }
        
        .tips-content {
            padding: 15px;
        }
        
        .tips-section {
            margin-bottom: 15px;
        }
        
        .tips-section:last-child {
            margin-bottom: 0;
        }
        
        .tips-section h4 {
            margin-bottom: 8px;
            color: #495057;
            font-size: 16px;
        }
        
        .tips-section ul {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .tips-section li {
            margin-bottom: 5px;
            color: #6c757d;
        }
        
        .feature-highlight {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 8px 12px;
            margin-top: 10px;
            border-radius: 0 4px 4px 0;
            font-size: 13px;
            color: #856404;
        }

        .toolbar {
            border: 1px solid #ddd;
            border-radius: 8px 8px 0 0;
            background-color: #f8f9fa;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.2s;
        }

        .btn:hover {
            transform: translateY(-1px);
        }

        .btn-primary {
            background-color: #2196f3;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1976d2;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .btn-format {
            background-color: transparent;
            border: 1px solid #ddd;
            padding: 8px;
        }

        .btn-format:hover {
            background-color: #e9ecef;
        }

        .btn-success {
            background-color: #28a745;
            color: white;
        }

        .btn-success:hover {
            background-color: #218838;
        }

        .btn-warning {
            background-color: #fd7e14;
            color: white;
        }

        .btn-warning:hover {
            background-color: #e8590c;
        }

        .divider {
            width: 1px;
            height: 24px;
            background-color: #ddd;
        }

        .editor-container {
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            border-radius: 0 0 8px 8px;
            background-color: white;
        }

        .editor {
            min-height: 250px;
            padding: 15px;
            outline: none;
            border: none;
            font-size: 14px;
            line-height: 1.6;
        }

        .editor:empty:before {
            content: "è¿™é‡Œè¾“å…¥æ–‡å­—...";
            color: #999;
        }

        .code-view {
            padding: 15px;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .code-textarea {
            width: 100%;
            height: 250px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            resize: vertical;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }

        .symbols-section {
            margin-top: 30px;
        }

        .symbols-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .symbols-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .symbols-more {
            color: #2196f3;
            cursor: pointer;
            font-size: 14px;
        }

        .symbols-more:hover {
            text-decoration: underline;
        }

        .symbols-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .symbol-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #fafafa;
            transition: all 0.2s;
        }

        .symbol-item:hover {
            background-color: #f0f0f0;
            transform: translateY(-1px);
        }

        .symbol-char {
            font-size: 20px;
            font-weight: bold;
            width: 30px;
            text-align: center;
            color: #333;
        }

        .symbol-btn {
            padding: 4px 12px;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .symbol-btn:hover {
            background-color: #1976d2;
        }

        .footer {
            margin-top: 40px;
            padding: 20px;
            background-color: #fff;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
        }

        .footer h4 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .footer p {
            font-size: 14px;
            color: #666;
        }
        .footer a {
            color: #2196f3;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        
        .toolbar-group {
            display: flex;
            align-items: center;
            gap: 4px;
        }
                .tips-content {
            padding: 0 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }
        
        .tips-content.expanded {
            max-height: 1000px;
            padding: 15px;
            transition: max-height 0.5s ease-in, padding 0.3s ease-in;
        }
        
        .tips-toggle.expanded {
            transform: rotate(180deg);
        }
        /* æ”¹è¿›å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .symbols-grid {
                grid-template-columns: 1fr;
            }
            
            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .toolbar-group {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .btn {
                font-size: 12px;
                padding: 6px 8px;
            }
        }
        
        @media (max-width: 480px) {
            .toolbar-group {
                flex-direction: column;
            }
            
            .divider {
                width: 100%;
                height: 1px;
                margin: 5px 0;
            }
        }
        /* é¢œè‰²é€‰æ‹©å™¨æ ·å¼ä¼˜åŒ– */
        input[type="color"] {
            -webkit-appearance: none;
            appearance: none;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            overflow: hidden;
        }
        
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        
        input[type="color"]::-webkit-color-swatch {
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .color-label {
            font-size: 12px;
            color: #666;
            white-space: nowrap;
        }
        
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ ‡é¢˜å’Œä½œè€…ä¿¡æ¯ -->
        <div class="header">
            <h1 class="title">å¯è§†åŒ–HTMLç¼–è¾‘å™¨</h1>
            <div class="author">ä½œè€…ï¼šé”å“¥</div>
            <div class="tips-container">
            <div class="tips-header" onclick="toggleTips()">
                <h3 style="margin: 0; color: #333;">ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
                <span class="tips-toggle" id="tipsToggle">â–¼</span>
            </div>
            <div class="tips-content" id="tipsContent">
                <div class="tips-section">
                    <h4>ğŸš€ å¿«é€Ÿå¼€å§‹</h4>
                    <ul>
                        <li><strong>ç¬¬ä¸€æ­¥ï¼š</strong>åœ¨ç¼–è¾‘åŒºåŸŸè¾“å…¥æ–‡å­—ï¼Œä½¿ç”¨å·¥å…·æ æŒ‰é’®ç¼–è¾‘å‡ºæƒ³è¦çš„æ•ˆæœ</li>
                        <li><strong>ç¬¬äºŒæ­¥ï¼š</strong>ç‚¹å‡»"æŸ¥çœ‹HTMLä»£ç "ï¼Œå…¨é€‰ã€å¤åˆ¶ç”Ÿæˆçš„ä»£ç </li>
                        <li><strong>ç¬¬ä¸‰æ­¥ï¼š</strong>å°†å¤åˆ¶çš„ä»£ç ç²˜è´´åˆ°éœ€è¦çš„åœ°æ–¹ä½¿ç”¨</li>
                    </ul>
                    <div class="feature-highlight">
                        <strong>ğŸ’¡ å°è´´å£«ï¼š</strong>ä»å…¶ä»–é¡µé¢å¤åˆ¶è¿‡æ¥çš„æ–‡å­—ï¼Œå»ºè®®å…ˆç‚¹å‡»"æ¸…é™¤æ–‡å­—æ•ˆæœ"æŒ‰é’®ï¼Œç„¶åå†é‡æ–°ç¼–è¾‘
                    </div>
                </div>
                
                <div class="tips-section">
                    <h4>ğŸ¨ æ–‡æœ¬æ ¼å¼åŒ–</h4>
                    <ul>
                        <li><strong>åŸºæœ¬æ ¼å¼ï¼š</strong>ç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿</li>
                        <li><strong>æ–‡æœ¬å¯¹é½ï¼š</strong>å·¦å¯¹é½ã€å±…ä¸­å¯¹é½ã€å³å¯¹é½</li>
                        <li><strong>åˆ—è¡¨ï¼š</strong>æ— åºåˆ—è¡¨ã€æœ‰åºåˆ—è¡¨</li>
                        <li><strong>å­—ä½“å¤§å°ï¼š</strong>å°ã€æ­£å¸¸ã€å¤§ã€ç‰¹å¤§</li>
                        <li><strong>é¢œè‰²è®¾ç½®ï¼š</strong>å­—ä½“é¢œè‰²ã€èƒŒæ™¯é¢œè‰²</li>
                    </ul>
                </div>
                
                <div class="tips-section">
                    <h4>ğŸ”§ é«˜çº§åŠŸèƒ½</h4>
                    <ul>
                        <li><strong>æ’¤é”€/é‡åšï¼š</strong>æ”¯æŒæ“ä½œå†å²è®°å½•ï¼Œå¯ä»¥æ’¤é”€å’Œé‡åšç¼–è¾‘æ“ä½œ</li>
                        <li><strong>æ’å…¥é“¾æ¥ï¼š</strong>ç‚¹å‡»é“¾æ¥æŒ‰é’®ï¼Œè¾“å…¥URLå’Œé“¾æ¥æ–‡æœ¬</li>
                        <li><strong>æ’å…¥å›¾ç‰‡ï¼š</strong>ç‚¹å‡»å›¾ç‰‡æŒ‰é’®ï¼Œè¾“å…¥å›¾ç‰‡URLå’Œæ›¿ä»£æ–‡æœ¬</li>
                        <li><strong>å®æ—¶é¢„è§ˆï¼š</strong>ç‚¹å‡»"å®æ—¶é¢„è§ˆ"æŸ¥çœ‹æœ€ç»ˆæ•ˆæœ</li>
                    </ul>
                </div>
                
                <div class="tips-section">
                    <h4>ğŸ’¾ æ•°æ®ç®¡ç†</h4>
                    <ul>
                        <li><strong>ä¿å­˜åˆ°æœ¬åœ°ï¼š</strong>å°†å½“å‰ç¼–è¾‘å†…å®¹ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</li>
                        <li><strong>ä»æœ¬åœ°åŠ è½½ï¼š</strong>ä»æµè§ˆå™¨æœ¬åœ°å­˜å‚¨åŠ è½½ä¹‹å‰ä¿å­˜çš„å†…å®¹</li>
                        <li><strong>å¯¼å‡ºHTMLï¼š</strong>å°†ç¼–è¾‘å†…å®¹å¯¼å‡ºä¸ºç‹¬ç«‹çš„HTMLæ–‡ä»¶</li>
                        <li><strong>å¯¼å‡ºæ–‡æœ¬ï¼š</strong>å°†ç¼–è¾‘å†…å®¹å¯¼å‡ºä¸ºçº¯æ–‡æœ¬æ–‡ä»¶</li>
                    </ul>
                </div>
                
                <div class="tips-section">
                    <h4>âœ¨ ç¬¦å·æ’å…¥</h4>
                    <ul>
                        <li><strong>å¸¸ç”¨ç¬¦å·ï¼š</strong>ç‚¹å‡»ç¬¦å·ç½‘æ ¼ä¸­çš„ç¬¦å·ç›´æ¥æ’å…¥åˆ°ç¼–è¾‘å™¨</li>
                        <li><strong>æœç´¢ç¬¦å·ï¼š</strong>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯å¿«é€ŸæŸ¥æ‰¾ç¬¦å·</li>
                        <li><strong>æ›´å¤šç¬¦å·ï¼š</strong>ç‚¹å‡»"æ›´å¤š"æŒ‰é’®å±•å¼€é¢å¤–çš„ç¬¦å·é›†åˆ</li>
                    </ul>
                </div>
                
                <div class="tips-section">
                    <h4>âŒ¨ï¸ å¿«æ·æ“ä½œ</h4>
                    <ul>
                        <li><strong>æ¸…é™¤æ ¼å¼ï¼š</strong>é€‰ä¸­æ–‡å­—åç‚¹å‡»"æ¸…é™¤æ–‡å­—æ•ˆæœ"æŒ‰é’®</li>
                        <li><strong>å­—ç¬¦ç»Ÿè®¡ï¼š</strong>çŠ¶æ€æ å®æ—¶æ˜¾ç¤ºè¾“å…¥å­—ç¬¦æ•°é‡</li>
                        <li><strong>ä»£ç æŸ¥çœ‹ï¼š</strong>éšæ—¶åˆ‡æ¢æŸ¥çœ‹HTMLæºä»£ç </li>
                    </ul>
                </div>
            </div>
        </div>
        </div>

        <!-- å·¥å…·æ  -->
        <div class="toolbar">
            <!-- è§†å›¾åˆ‡æ¢ç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-primary" onclick="toggleView()">
                    <span id="viewModeText">ğŸ‘ æŸ¥çœ‹HTMLä»£ç </span>
                </button>
                <button class="btn btn-primary" onclick="togglePreview()">
                    ğŸ‘ å®æ—¶é¢„è§ˆ
                </button>
            </div>
            
            <div class="divider"></div>
            
            <!-- åŸºæœ¬æ ¼å¼ç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-format" onclick="undo()" title="æ’¤é”€">â†¶ æ’¤é”€</button>
                <button class="btn btn-format" onclick="redo()" title="é‡åš">â†· é‡åš</button>
                <div class="divider"></div>
                <button class="btn btn-format" onclick="formatText('bold')" title="ç²—ä½“"><strong>B</strong></button>
                <button class="btn btn-format" onclick="formatText('italic')" title="æ–œä½“"><em>I</em></button>
                <button class="btn btn-format" onclick="formatText('underline')" title="ä¸‹åˆ’çº¿"><u>U</u></button>
            </div>
            
            <div class="divider"></div>
            
            <!-- åˆ—è¡¨ç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-format" onclick="formatText('insertUnorderedList')" title="æ— åºåˆ—è¡¨">â€¢ åˆ—è¡¨</button>
                <button class="btn btn-format" onclick="formatText('insertOrderedList')" title="æœ‰åºåˆ—è¡¨">1. åˆ—è¡¨</button>
            </div>
            
            <div class="divider"></div>
            
            <!-- å¯¹é½ç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-format" onclick="formatText('justifyLeft')" title="å·¦å¯¹é½">â¬… å·¦å¯¹é½</button>
                <button class="btn btn-format" onclick="formatText('justifyCenter')" title="å±…ä¸­å¯¹é½">â¬Œ å±…ä¸­</button>
                <button class="btn btn-format" onclick="formatText('justifyRight')" title="å³å¯¹é½">â¡ å³å¯¹é½</button>
            </div>
            
            <div class="divider"></div>
            
            <!-- é¢œè‰²ç»„ -->
            <div class="toolbar-group">
                <div class="color-picker-wrapper">
                    <span class="color-label">å­—ä½“:</span>
                    <input type="color" onchange="changeColor(this.value)" title="æ–‡å­—é¢œè‰²" class="btn" style="width: 30px; height: 30px; padding: 2px;">
                </div>
                <div class="color-picker-wrapper">
                    <span class="color-label">èƒŒæ™¯:</span>
                    <input type="color" onchange="changeBackgroundColor(this.value)" title="èƒŒæ™¯é¢œè‰²" class="btn" style="width: 30px; height: 30px; padding: 2px;">
                </div>
            </div>
            
            <div class="divider"></div>
            
            <!-- å­—ä½“ç»„ -->
            <div class="toolbar-group">
                <select onchange="changeFontSize(this.value)" class="btn">
                    <option value="">å­—å·</option>
                    <option value="1">å°</option>
                    <option value="3">æ­£å¸¸</option>
                    <option value="5">å¤§</option>
                    <option value="7">ç‰¹å¤§</option>
                </select>
            </div>
            
            <div class="divider"></div>
            
            <!-- æ’å…¥ç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-format" onclick="insertLink()" title="æ’å…¥é“¾æ¥">ğŸ”— é“¾æ¥</button>
                <button class="btn btn-format" onclick="insertImage()" title="æ’å…¥å›¾ç‰‡">ğŸ–¼ å›¾ç‰‡</button>
            </div>
            
            <div class="divider"></div>
            
            <!-- å­˜å‚¨ç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-secondary" onclick="saveToLocal()" title="ä¿å­˜åˆ°æœ¬åœ°">
                    ğŸ’¾ ä¿å­˜
                </button>
                <button class="btn btn-secondary" onclick="loadFromLocal()" title="ä»æœ¬åœ°åŠ è½½">
                    ğŸ“ åŠ è½½
                </button>
            </div>
            
            <div class="divider"></div>
            
            <!-- å¯¼å‡ºç»„ -->
            <div class="toolbar-group">
                <button class="btn btn-success" onclick="exportAsHTML()" title="å¯¼å‡ºä¸ºHTML">
                    ğŸ“„ å¯¼å‡ºHTML
                </button>
                <button class="btn btn-success" onclick="exportAsText()" title="å¯¼å‡ºä¸ºæ–‡æœ¬">
                    ğŸ“ å¯¼å‡ºæ–‡æœ¬
                </button>
            </div>
        </div>

        <!-- ç¼–è¾‘åŒºåŸŸ -->
        <div class="editor-container">
            <div id="editor" class="editor" contenteditable="true" oninput="debouncedUpdateContent()"></div>
            
            <div id="codeView" class="code-view" style="display: none;">
                <div class="code-header">
                    <span>HTMLä»£ç ï¼š</span>
                    <button class="btn btn-success" onclick="copyHTML()">
                        ğŸ“‹ å¤åˆ¶ä»£ç 
                    </button>
                </div>
                <textarea id="htmlCode" class="code-textarea" placeholder="HTMLä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            </div>
        </div>

        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
            <span>è¾“å…¥ <span id="charCount">0</span> å­—ç¬¦</span>
            <button class="btn btn-warning" onclick="clearFormat()">
                ğŸ”„ æ¸…é™¤æ–‡å­—æ•ˆæœ
            </button>
        </div>

        <!-- é¢„è§ˆåŒºåŸŸ -->
        <div class="preview-section" style="display: none; margin-top: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
            <div class="preview-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h4>å®æ—¶é¢„è§ˆ</h4>
                <button class="btn btn-secondary" onclick="togglePreview()">å…³é—­é¢„è§ˆ</button>
            </div>
            <div id="previewContent" style="border: 1px solid #eee; padding: 15px; min-height: 100px; background-color: white;"></div>
        </div>

        <!-- å¸¸ç”¨ç¬¦å· -->
        <div class="symbols-section">
            <div class="symbols-header">
                <h3 class="symbols-title">å¸¸ç”¨ç¬¦å·</h3>
                <span class="symbols-more" style="cursor: pointer;">æ›´å¤š</span>
            </div>
            
            <div class="symbols-search" style="margin-bottom: 15px;">
                <input type="text" id="symbolSearch" placeholder="æœç´¢ç¬¦å·..." 
                       style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
                       oninput="filterSymbols(this.value)">
            </div>
            
            <div class="symbols-grid" id="symbolsGrid">
                <!-- ç¬¦å·å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- é¡µè„š -->
        <div class="footer">
            <p>ç‰ˆæƒå½’ è·¨å¢ƒä¹è¶£å›­æ‰€æœ‰ å®˜ç½‘ï¼š <a href="https://amzlink.top/" target="_blank" rel="noopener">https://amzlink.top/</a> | ä½œè€…ï¼šé”å“¥</p>
        </div>
       

    <script>
        // æ·»åŠ é˜²æŠ–å‡½æ•°
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // å¸¸ç”¨ç¬¦å·æ•°æ®
        const commonSymbols = [
            { symbol: 'âˆš', name: 'å¯¹å‹¾' },
            { symbol: 'â„¢', name: 'å•†æ ‡' },
            { symbol: 'â˜…', name: 'æ˜Ÿå·' },
            { symbol: 'â–³', name: 'ä¸‰è§’' },
            { symbol: 'â†‘', name: 'ä¸Šç®­å¤´' },
            { symbol: 'â†“', name: 'ä¸‹ç®­å¤´' },
            { symbol: 'â†', name: 'å·¦ç®­å¤´' },
            { symbol: 'â†’', name: 'å³ç®­å¤´' },
            { symbol: 'â˜º', name: 'ç¬‘è„¸' },
            { symbol: '@', name: 'atç¬¦å·' },
            { symbol: 'â‘ ', name: 'æ•°å­—1' },
            { symbol: 'â‘¡', name: 'æ•°å­—2' },
            { symbol: 'â‘¢', name: 'æ•°å­—3' },
            { symbol: 'â‘£', name: 'æ•°å­—4' },
            { symbol: 'â‘¤', name: 'æ•°å­—5' },
            { symbol: 'â‘¥', name: 'æ•°å­—6' },
            { symbol: 'â‘¦', name: 'æ•°å­—7' },
            { symbol: 'â‘§', name: 'æ•°å­—8' },
            { symbol: 'â‘¨', name: 'æ•°å­—9' },
            { symbol: 'â‘©', name: 'æ•°å­—10' },
            { symbol: 'Â©', name: 'ç‰ˆæƒ' },
            { symbol: 'Â®', name: 'æ³¨å†Œ' },
            { symbol: 'â˜‘', name: 'é€‰ä¸­' },
            { symbol: '+', name: 'åŠ å·' },
            { symbol: 'â—', name: 'å®å¿ƒåœ†' },
            { symbol: 'â™¥', name: 'å¿ƒå½¢' },
            { symbol: 'â€¢', name: 'é¡¹ç›®ç¬¦å·' },
            { symbol: 'â–²', name: 'ä¸Šä¸‰è§’' },
            { symbol: 'â–¼', name: 'ä¸‹ä¸‰è§’' },
            { symbol: 'â–¡', name: 'æ–¹æ¡†' }
        ];

        // æ›´å¤šç¬¦å·æ•°æ®
        const moreSymbols = [
            { symbol: 'â€»', name: 'ç±³å·' },
            { symbol: 'â„–', name: 'åºå·' },
            { symbol: 'â™‚', name: 'ç”·æ€§' },
            { symbol: 'â™€', name: 'å¥³æ€§' },
            { symbol: 'â™ ', name: 'é»‘æ¡ƒ' },
            { symbol: 'â™£', name: 'æ¢…èŠ±' },
            { symbol: 'â™¥', name: 'çº¢å¿ƒ' },
            { symbol: 'â™¦', name: 'æ–¹å—' },
            { symbol: 'â™ª', name: 'éŸ³ç¬¦' },
            { symbol: 'â™«', name: 'åŒéŸ³ç¬¦' },
            { symbol: 'â˜€', name: 'å¤ªé˜³' },
            { symbol: 'â˜', name: 'äº‘æœµ' },
            { symbol: 'â˜‚', name: 'é›¨ä¼' },
            { symbol: 'â˜ƒ', name: 'é›ªèŠ±' },
            { symbol: 'â˜„', name: 'å½—æ˜Ÿ' },
            { symbol: 'â™¨', name: 'æ¸©æ³‰' },
            { symbol: 'â™©', name: 'å››åˆ†éŸ³ç¬¦' },
            { symbol: 'â™¬', name: 'åå…­åˆ†éŸ³ç¬¦' },
            { symbol: 'â™­', name: 'é™å·' },
            { symbol: 'â™®', name: 'è¿˜åŸå·' },
            { symbol: 'â™¯', name: 'å‡å·' },
            { symbol: 'â™°', name: 'åŒå‡å·' },
            { symbol: 'â™±', name: 'åŒé™å·' },
            { symbol: 'â™²', name: 'å¾ªç¯' },
            { symbol: 'â™³', name: 'å›æ”¶' },
            { symbol: 'â™´', name: 'çº¸å¼ ' },
            { symbol: 'â™µ', name: 'å¡‘æ–™' },
            { symbol: 'â™¶', name: 'ç»ç’ƒ' },
            { symbol: 'â™·', name: 'é‡‘å±' },
            { symbol: 'â™¸', name: 'ç”µå­' },
            { symbol: 'â™¹', name: 'å †è‚¥' },
            { symbol: 'â™º', name: 'å¶å­' },
            { symbol: 'â™»', name: 'å¾ªç¯åˆ©ç”¨' },
            { symbol: 'â™¼', name: 'è°·ç‰©' },
            { symbol: 'â™½', name: 'å¯å›æ”¶' },
            { symbol: 'â™¾', name: 'æ°¸ä¹…' },
            { symbol: 'â™¿', name: 'è½®æ¤…' },
            { symbol: 'âš€', name: 'éª°å­1' },
            { symbol: 'âš', name: 'éª°å­2' },
            { symbol: 'âš‚', name: 'éª°å­3' },
            { symbol: 'âšƒ', name: 'éª°å­4' },
            { symbol: 'âš„', name: 'éª°å­5' },
            { symbol: 'âš…', name: 'éª°å­6' },
            { symbol: 'âš†', name: 'ç™½åœ†åœˆ' },
            { symbol: 'âš‡', name: 'é—ªç”µ' },
            { symbol: 'âšˆ', name: 'å½—æ˜Ÿ' },
            { symbol: 'âš‰', name: 'çˆ†ç‚¸' },
            { symbol: 'âš', name: 'ç™½æ——' },
            { symbol: 'âš‘', name: 'é»‘æ——' },
            { symbol: 'âš’', name: 'é”¤å­' },
            { symbol: 'âš“', name: 'é”š' },
            { symbol: 'âš”', name: 'äº¤å‰å‰‘' },
            { symbol: 'âš•', name: 'åŒ»ç–—' },
            { symbol: 'âš–', name: 'å¤©å¹³' },
            { symbol: 'âš—', name: 'çƒ§ç“¶' },
            { symbol: 'âš˜', name: 'èŠ±æœµ' },
            { symbol: 'âš™', name: 'é½¿è½®' },
            { symbol: 'âšš', name: 'è°ƒå’Œ' },
            { symbol: 'âš›', name: 'åŸå­' },
            { symbol: 'âšœ', name: 'é¸¢å°¾èŠ±' },
            { symbol: 'âš', name: 'æ˜Ÿæ˜Ÿ' },
            { symbol: 'âš', name: 'æŒ‡åŒ—é’ˆ' },
            { symbol: 'âšŸ', name: 'æŒ‡å—é’ˆ' },
            { symbol: 'âš ', name: 'è­¦å‘Š' },
            { symbol: 'âš¡', name: 'é«˜å‹ç”µ' },
            { symbol: 'âš¢', name: 'å¥³æ€§åŒæ€§' },
            { symbol: 'âš£', name: 'ç”·æ€§åŒæ€§' },
            { symbol: 'âš¤', name: 'å¼‚æ€§æ‹' },
            { symbol: 'âš¥', name: 'åŒæ€§æ‹' },
            { symbol: 'âš¦', name: 'ç”·æ€§å¸¦ç®­å¤´' },
            { symbol: 'âš§', name: 'è·¨æ€§åˆ«' },
            { symbol: 'âš¨', name: 'å‚ç›´åŒæ€§' },
            { symbol: 'âš©', name: 'æ°´å¹³åŒæ€§' },
            { symbol: 'âšª', name: 'ç™½åœ†' },
            { symbol: 'âš«', name: 'é»‘åœ†' },
            { symbol: 'âš¬', name: 'ä¸­ç©ºåœ†' },
            { symbol: 'âš­', name: 'æ³¢æµªçº¿' },
            { symbol: 'âš®', name: 'ç¦æ­¢' },
            { symbol: 'âš¯', name: 'ç¦»å¼€' },
            { symbol: 'âš°', name: 'éª¨ç°ç›’' },
            { symbol: 'âš±', name: 'éª¨ç°ç“®' },
            { symbol: 'âš²', name: 'åœ°çƒ' },
            { symbol: 'âš³', name: 'æ°´ç“¶åº§' },
            { symbol: 'âš´', name: 'åŒé±¼åº§' },
            { symbol: 'âšµ', name: 'ç™½ç¾Šåº§' },
            { symbol: 'âš¶', name: 'é‡‘ç‰›åº§' },
            { symbol: 'âš·', name: 'åŒå­åº§' },
            { symbol: 'âš¸', name: 'å·¨èŸ¹åº§' },
            { symbol: 'âš¹', name: 'ç‹®å­åº§' },
            { symbol: 'âšº', name: 'å¤„å¥³åº§' },
            { symbol: 'âš»', name: 'å¤©ç§¤åº§' },
            { symbol: 'âš¼', name: 'å¤©èåº§' },
            { symbol: 'âš½', name: 'è¶³çƒ' },
            { symbol: 'âš¾', name: 'æ£’çƒ' },
            { symbol: 'âš¿', name: 'å°çƒ' },
            { symbol: 'â›€', name: 'æ–¯è¯ºå…‹' },
            { symbol: 'â›', name: 'å›½é™…è±¡æ£‹' },
            { symbol: 'â›‚', name: 'å›½é™…è±¡æ£‹' },
            { symbol: 'â›ƒ', name: 'å›½é™…è±¡æ£‹' },
            { symbol: 'â›„', name: 'é›ªäºº' },
            { symbol: 'â›‡', name: 'é›ªå´©' },
            { symbol: 'â›ˆ', name: 'é›·é›¨' },
            { symbol: 'â›‰', name: 'æ—¥å‡º' },
            { symbol: 'â›Š', name: 'æ—¥è½' },
            { symbol: 'â›‹', name: 'æœˆäº®' },
            { symbol: 'â›Œ', name: 'æ—¥é£Ÿ' },
            { symbol: 'â›', name: 'æœˆé£Ÿ' },
            { symbol: 'â›', name: 'ä¸Šå‡' },
            { symbol: 'â›', name: 'é•' },
            { symbol: 'â›', name: 'ç”µé’»' },
            { symbol: 'â›‘', name: 'æ•‘æ´' },
            { symbol: 'â›’', name: 'æµ·å…³' },
            { symbol: 'â›“', name: 'é”é“¾' },
            { symbol: 'â›”', name: 'ç¦æ­¢' },
            { symbol: 'â›•', name: 'ç¦æ­¢è¿›å…¥' },
            { symbol: 'â›–', name: 'ç¦æ­¢å¸çƒŸ' },
            { symbol: 'â›—', name: 'ç¦æ­¢åœè½¦' },
            { symbol: 'â›˜', name: 'ç¦æ­¢å·¦è½¬' },
            { symbol: 'â›™', name: 'ç¦æ­¢å³è½¬' },
            { symbol: 'â›š', name: 'ç¦æ­¢æ‰å¤´' },
            { symbol: 'â››', name: 'ç¦æ­¢è¶…è½¦' },
            { symbol: 'â›œ', name: 'ç¦æ­¢é¸£ç¬›' },
            { symbol: 'â›', name: 'ç¦æ­¢è¡Œäºº' },
            { symbol: 'â›', name: 'ç¦æ­¢è‡ªè¡Œè½¦' },
            { symbol: 'â›Ÿ', name: 'ç¦æ­¢æ‘©æ‰˜è½¦' },
            { symbol: 'â› ', name: 'æ³¨æ„å„¿ç«¥' },
            { symbol: 'â›¡', name: 'æ³¨æ„è¡Œäºº' },
            { symbol: 'â›¢', name: 'æ³¨æ„è‡ªè¡Œè½¦' },
            { symbol: 'â›£', name: 'æ³¨æ„åŠ¨ç‰©' },
            { symbol: 'â›¤', name: 'æ³¨æ„æ–½å·¥' },
            { symbol: 'â›¥', name: 'æ³¨æ„è½çŸ³' },
            { symbol: 'â›¦', name: 'æ³¨æ„å¼¯é“' },
            { symbol: 'â›§', name: 'æ³¨æ„å¡é“' },
            { symbol: 'â›¨', name: 'æ³¨æ„éš§é“' },
            { symbol: 'â›©', name: 'é¸Ÿå±…' },
            { symbol: 'â›ª', name: 'æ•™å ‚' },
            { symbol: 'â›«', name: 'æ¸…çœŸå¯º' },
            { symbol: 'â›¬', name: 'çŠ¹å¤ªæ•™å ‚' },
            { symbol: 'â›­', name: 'å¯ºåº™' },
            { symbol: 'â›®', name: 'ç¥ç¤¾' },
            { symbol: 'â›¯', name: 'å¢“åœ°' },
            { symbol: 'â›°', name: 'å±±' },
            { symbol: 'â›±', name: 'æ²™æ»©' },
            { symbol: 'â›²', name: 'å–·æ³‰' },
            { symbol: 'â›³', name: 'é«˜å°”å¤«' },
            { symbol: 'â›´', name: 'æ¸¡è½®' },
            { symbol: 'â›µ', name: 'å¸†èˆ¹' },
            { symbol: 'â›¶', name: 'åˆ’è‰‡' },
            { symbol: 'â›·', name: 'æ»‘é›ª' },
            { symbol: 'â›¸', name: 'æ»‘å†°' },
            { symbol: 'â›¹', name: 'ç¯®çƒ' },
            { symbol: 'â›º', name: 'éœ²è¥' },
            { symbol: 'â›»', name: 'æ—¥æœ¬' },
            { symbol: 'â›¼', name: 'éŸ©å›½' },
            { symbol: 'â›½', name: 'åŠ æ²¹ç«™' },
            { symbol: 'â›¾', name: 'å…¬äº¤ç«™' },
            { symbol: 'â›¿', name: 'åœ°é“ç«™' },
            { symbol: 'âœ€', name: 'å›è½¦' },
            { symbol: 'âœ', name: 'å‰ªåˆ€' },
            { symbol: 'âœ‚', name: 'å‰ªåˆ€' },
            { symbol: 'âœƒ', name: 'å‰ªåˆ€' },
            { symbol: 'âœ„', name: 'å‰ªåˆ€' },
            { symbol: 'âœ…', name: 'å¯¹å‹¾' },
            { symbol: 'âœ†', name: 'ç”µè¯' },
            { symbol: 'âœ‡', name: 'ç£å¸¦' },
            { symbol: 'âœˆ', name: 'é£æœº' },
            { symbol: 'âœ‰', name: 'ä¿¡å°' },
            { symbol: 'âœŠ', name: 'æ‹³å¤´' },
            { symbol: 'âœ‹', name: 'æ‰‹æŒ' },
            { symbol: 'âœŒ', name: 'èƒœåˆ©' },
            { symbol: 'âœ', name: 'å†™å­—' },
            { symbol: 'âœ', name: 'é“…ç¬”' },
            { symbol: 'âœ', name: 'é“…ç¬”' },
            { symbol: 'âœ', name: 'é“…ç¬”' },
            { symbol: 'âœ‘', name: 'é’¢ç¬”' },
            { symbol: 'âœ’', name: 'é’¢ç¬”' },
            { symbol: 'âœ“', name: 'å¯¹å‹¾' },
            { symbol: 'âœ”', name: 'åå­—' },
            { symbol: 'âœ•', name: 'å‰å·' },
            { symbol: 'âœ–', name: 'å‰å·' },
            { symbol: 'âœ—', name: 'å‰å·' },
            { symbol: 'âœ˜', name: 'å‰å·' },
            { symbol: 'âœ™', name: 'åå­—æ¶' },
            { symbol: 'âœš', name: 'åŠ å·' },
            { symbol: 'âœ›', name: 'åŠ å·' },
            { symbol: 'âœœ', name: 'åŠ å·' },
            { symbol: 'âœ', name: 'åå­—æ¶' },
            { symbol: 'âœ', name: 'åå­—æ¶' },
            { symbol: 'âœŸ', name: 'åå­—æ¶' },
            { symbol: 'âœ ', name: 'ä¸‡å­—ç¬¦' },
            { symbol: 'âœ¡', name: 'å¤§å«ä¹‹æ˜Ÿ' },
            { symbol: 'âœ¢', name: 'æ˜Ÿå·' },
            { symbol: 'âœ£', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¤', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¥', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¦', name: 'æ˜Ÿå·' },
            { symbol: 'âœ§', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¨', name: 'æ˜Ÿæ˜Ÿ' },
            { symbol: 'âœ©', name: 'æ˜Ÿå·' },
            { symbol: 'âœª', name: 'æ˜Ÿå·' },
            { symbol: 'âœ«', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¬', name: 'æ˜Ÿå·' },
            { symbol: 'âœ­', name: 'æ˜Ÿå·' },
            { symbol: 'âœ®', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¯', name: 'æ˜Ÿå·' },
            { symbol: 'âœ°', name: 'æ˜Ÿå·' },
            { symbol: 'âœ±', name: 'æ˜Ÿå·' },
            { symbol: 'âœ²', name: 'æ˜Ÿå·' },
            { symbol: 'âœ³', name: 'æ˜Ÿå·' },
            { symbol: 'âœ´', name: 'æ˜Ÿå·' },
            { symbol: 'âœµ', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¶', name: 'æ˜Ÿå·' },
            { symbol: 'âœ·', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¸', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¹', name: 'æ˜Ÿå·' },
            { symbol: 'âœº', name: 'æ˜Ÿå·' },
            { symbol: 'âœ»', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¼', name: 'æ˜Ÿå·' },
            { symbol: 'âœ½', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¾', name: 'æ˜Ÿå·' },
            { symbol: 'âœ¿', name: 'èŠ±æœµ' },
            { symbol: 'â€', name: 'èŠ±æœµ' },
            { symbol: 'â', name: 'èŠ±æœµ' },
            { symbol: 'â‚', name: 'èŠ±æœµ' },
            { symbol: 'âƒ', name: 'èŠ±æœµ' },
            { symbol: 'â„', name: 'é›ªèŠ±' },
            { symbol: 'â…', name: 'é›ªèŠ±' },
            { symbol: 'â†', name: 'é›ªèŠ±' },
            { symbol: 'â‡', name: 'æ˜Ÿå·' },
            { symbol: 'âˆ', name: 'æ˜Ÿå·' },
            { symbol: 'â‰', name: 'æ˜Ÿå·' },
            { symbol: 'âŠ', name: 'æ˜Ÿå·' },
            { symbol: 'â‹', name: 'æ˜Ÿå·' },
            { symbol: 'âŒ', name: 'å‰å·' },
            { symbol: 'â', name: 'åœ†åœˆ' },
            { symbol: 'â', name: 'å‰å·' },
            { symbol: 'â', name: 'æ–¹å—' },
            { symbol: 'â', name: 'æ–¹å—' },
            { symbol: 'â‘', name: 'æ–¹å—' },
            { symbol: 'â’', name: 'æ–¹å—' },
            { symbol: 'â“', name: 'é—®å·' },
            { symbol: 'â”', name: 'ç™½é—®å·' },
            { symbol: 'â•', name: 'æ„Ÿå¹å·' },
            { symbol: 'â–', name: 'è±å½¢' },
            { symbol: 'â—', name: 'æ„Ÿå¹å·' },
            { symbol: 'â˜', name: 'ç«–çº¿' },
            { symbol: 'â™', name: 'ç«–çº¿' },
            { symbol: 'âš', name: 'ç«–çº¿' },
            { symbol: 'â›', name: 'å•å¼•å·' },
            { symbol: 'âœ', name: 'å•å¼•å·' },
            { symbol: 'â', name: 'åŒå¼•å·' },
            { symbol: 'â', name: 'åŒå¼•å·' },
            { symbol: 'âŸ', name: 'é€—å·' },
            { symbol: 'â ', name: 'é—®å·' },
            { symbol: 'â¡', name: 'éŸ³ç¬¦' },
            { symbol: 'â¢', name: 'åŒå¹å·' },
            { symbol: 'â£', name: 'å¿ƒå½¢' },
            { symbol: 'â¤', name: 'å¿ƒå½¢' },
            { symbol: 'â¥', name: 'å¿ƒå½¢' },
            { symbol: 'â¦', name: 'èŠ±æœµ' },
            { symbol: 'â§', name: 'èŠ±æœµ' },
            { symbol: 'â¨', name: 'å·¦æ‹¬å·' },
            { symbol: 'â©', name: 'å³æ‹¬å·' },
            { symbol: 'âª', name: 'å·¦æ‹¬å·' },
            { symbol: 'â«', name: 'å³æ‹¬å·' },
            { symbol: 'â¬', name: 'å·¦æ‹¬å·' },
            { symbol: 'â­', name: 'å³æ‹¬å·' },
            { symbol: 'â®', name: 'å·¦ä¸‰è§’' },
            { symbol: 'â¯', name: 'å³ä¸‰è§’' },
            { symbol: 'â°', name: 'å·¦ä¸‰è§’' },
            { symbol: 'â±', name: 'å³ä¸‰è§’' },
            { symbol: 'â²', name: 'å·¦æ‹¬å·' },
            { symbol: 'â³', name: 'å³æ‹¬å·' },
            { symbol: 'â´', name: 'å·¦èŠ±æ‹¬å·' },
            { symbol: 'âµ', name: 'å³èŠ±æ‹¬å·' },
            { symbol: 'â¶', name: 'æ•°å­—1' },
            { symbol: 'â·', name: 'æ•°å­—2' },
            { symbol: 'â¸', name: 'æ•°å­—3' },
            { symbol: 'â¹', name: 'æ•°å­—4' },
            { symbol: 'âº', name: 'æ•°å­—5' },
            { symbol: 'â»', name: 'æ•°å­—6' },
            { symbol: 'â¼', name: 'æ•°å­—7' },
            { symbol: 'â½', name: 'æ•°å­—8' },
            { symbol: 'â¾', name: 'æ•°å­—9' },
            { symbol: 'â¿', name: 'æ•°å­—10' },
            { symbol: 'â“«', name: 'æ•°å­—11' },
            { symbol: 'â“¬', name: 'æ•°å­—12' },
            { symbol: 'â“­', name: 'æ•°å­—13' },
            { symbol: 'â“®', name: 'æ•°å­—14' },
            { symbol: 'â“¯', name: 'æ•°å­—15' },
            { symbol: 'â“°', name: 'æ•°å­—16' },
            { symbol: 'â“±', name: 'æ•°å­—17' },
            { symbol: 'â“²', name: 'æ•°å­—18' },
            { symbol: 'â“³', name: 'æ•°å­—19' },
            { symbol: 'â“´', name: 'æ•°å­—20' },
            { symbol: 'â“µ', name: 'æ•°å­—1' },
            { symbol: 'â“¶', name: 'æ•°å­—2' },
            { symbol: 'â“·', name: 'æ•°å­—3' },
            { symbol: 'â“¸', name: 'æ•°å­—4' },
            { symbol: 'â“¹', name: 'æ•°å­—5' },
            { symbol: 'â“º', name: 'æ•°å­—6' },
            { symbol: 'â“»', name: 'æ•°å­—7' },
            { symbol: 'â“¼', name: 'æ•°å­—8' },
            { symbol: 'â“½', name: 'æ•°å­—9' },
            { symbol: 'â“¾', name: 'æ•°å­—10' },
            { symbol: 'â“¿', name: 'æ•°å­—0' },
            { symbol: 'â€', name: 'èŠ±æœµ' },
            { symbol: 'â', name: 'èŠ±æœµ' },
            { symbol: 'â‚', name: 'èŠ±æœµ' },
            { symbol: 'âƒ', name: 'èŠ±æœµ' },
            { symbol: 'â„', name: 'é›ªèŠ±' },
            { symbol: 'â…', name: 'é›ªèŠ±' },
            { symbol: 'â†', name: 'é›ªèŠ±' },
            { symbol: 'â‡', name: 'æ˜Ÿå·' },
            { symbol: 'âˆ', name: 'æ˜Ÿå·' },
            { symbol: 'â‰', name: 'æ˜Ÿå·' },
            { symbol: 'âŠ', name: 'æ˜Ÿå·' },
            { symbol: 'â‹', name: 'æ˜Ÿå·' }
        ];

        // å…¨å±€å˜é‡
        let isCodeView = false;
        let charCount = 0;
        let showMoreSymbols = false;
        let isPreviewMode = false;
        
        // å†å²è®°å½•åŠŸèƒ½
        let history = [];
        let historyStep = -1;

        // æ·»åŠ æœ¬åœ°å­˜å‚¨åŠŸèƒ½
        function saveToLocal() {
            const editor = document.getElementById('editor');
            localStorage.setItem('editorContent', editor.innerHTML);
            localStorage.setItem('editorHistory', JSON.stringify(history));
            localStorage.setItem('historyStep', historyStep);
        }
        
        function loadFromLocal() {
            const savedContent = localStorage.getItem('editorContent');
            const savedHistory = localStorage.getItem('editorHistory');
            const savedStep = localStorage.getItem('historyStep');
            
            if (savedContent) {
                const editor = document.getElementById('editor');
                editor.innerHTML = savedContent;
                updateContent();
            }
            
            if (savedHistory) {
                history = JSON.parse(savedHistory);
            }
            
            if (savedStep) {
                historyStep = parseInt(savedStep);
            }
        }
        
        // è‡ªåŠ¨ä¿å­˜
        setInterval(saveToLocal, 30000); // æ¯30ç§’è‡ªåŠ¨ä¿å­˜
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadFromLocal();
            generateSymbols();
            updateContent();
            
            // ä¸º'æ›´å¤š'æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            const moreButton = document.querySelector('.symbols-more');
            if (moreButton) {
                moreButton.addEventListener('click', toggleMoreSymbols);
            }
            
            // åˆå§‹åŒ–å†å²è®°å½•
            saveHistory();
            
            // åˆå§‹åŒ–æç¤ºçŠ¶æ€
            const tipsExpanded = localStorage.getItem('tipsExpanded');
            if (tipsExpanded === 'false') {
                const tipsContent = document.getElementById('tipsContent');
                const tipsToggle = document.getElementById('tipsToggle');
                tipsContent.style.display = 'none';
                tipsToggle.textContent = 'â–¶';
            }
        });

        // åˆ‡æ¢æ›´å¤šç¬¦å·æ˜¾ç¤º
        function toggleMoreSymbols() {
            showMoreSymbols = !showMoreSymbols;
            
            // è·å–å½“å‰æœç´¢è¯å¹¶é‡æ–°è¿‡æ»¤ç¬¦å·
            const searchInput = document.getElementById('symbolSearch');
            const searchTerm = searchInput ? searchInput.value : '';
            
            if (searchTerm) {
                filterSymbols(searchTerm);
            } else {
                generateSymbols();
            }
            
            const moreButton = document.querySelector('.symbols-more');
            if (showMoreSymbols) {
                moreButton.textContent = 'æ”¶èµ·';
            } else {
                moreButton.textContent = 'æ›´å¤š';
            }
        }

        // åˆ‡æ¢é¢„è§ˆæ¨¡å¼
        function togglePreview() {
            isPreviewMode = !isPreviewMode;
            const previewSection = document.querySelector('.preview-section');
            const previewContent = document.getElementById('previewContent');
            
            if (isPreviewMode) {
                previewSection.style.display = 'block';
                updatePreview();
            } else {
                previewSection.style.display = 'none';
            }
        }
        
        // æ›´æ–°é¢„è§ˆå†…å®¹
        function updatePreview() {
            if (isPreviewMode) {
                const editor = document.getElementById('editor');
                const previewContent = document.getElementById('previewContent');
                previewContent.innerHTML = editor.innerHTML;
            }
        }
        
        // ç”Ÿæˆç¬¦å·ç½‘æ ¼
        function generateSymbols() {
            const grid = document.getElementById('symbolsGrid');
            grid.innerHTML = '';
            
            // æ˜¾ç¤ºå¸¸ç”¨ç¬¦å·
            commonSymbols.forEach(item => {
                const symbolDiv = document.createElement('div');
                symbolDiv.className = 'symbol-item';
                symbolDiv.innerHTML = `
                    <span class="symbol-char">${item.symbol}</span>
                    <button class="symbol-btn" onclick="insertSymbol('${item.symbol}')">å¤åˆ¶</button>
                `;
                grid.appendChild(symbolDiv);
            });
            
            // å¦‚æœæ˜¾ç¤ºæ›´å¤šç¬¦å·ï¼Œåˆ™æ·»åŠ æ›´å¤šç¬¦å·
            if (showMoreSymbols) {
                moreSymbols.forEach(item => {
                    const symbolDiv = document.createElement('div');
                    symbolDiv.className = 'symbol-item';
                    symbolDiv.innerHTML = `
                        <span class="symbol-char">${item.symbol}</span>
                        <button class="symbol-btn" onclick="insertSymbol('${item.symbol}')">å¤åˆ¶</button>
                    `;
                    grid.appendChild(symbolDiv);
                });
            }
        }
        
        // ç¬¦å·è¿‡æ»¤å‡½æ•°
        function filterSymbols(searchTerm) {
            const grid = document.getElementById('symbolsGrid');
            const allSymbols = showMoreSymbols ? [...commonSymbols, ...moreSymbols] : commonSymbols;
            
            grid.innerHTML = '';
            
            const filteredSymbols = allSymbols.filter(item => 
                item.symbol.toLowerCase().includes(searchTerm.toLowerCase()) ||
                item.name.toLowerCase().includes(searchTerm.toLowerCase())
            );
            
            filteredSymbols.forEach(item => {
                const symbolDiv = document.createElement('div');
                symbolDiv.className = 'symbol-item';
                symbolDiv.innerHTML = `
                    <span class="symbol-char">${item.symbol}</span>
                    <button class="symbol-btn" onclick="insertSymbol('${item.symbol}')">å¤åˆ¶</button>
                `;
                grid.appendChild(symbolDiv);
            });
        }

        // åˆ‡æ¢è§†å›¾æ¨¡å¼
        function toggleView() {
            const editor = document.getElementById('editor');
            const codeView = document.getElementById('codeView');
            const viewModeText = document.getElementById('viewModeText');
            
            isCodeView = !isCodeView;
            
            if (isCodeView) {
                editor.style.display = 'none';
                codeView.style.display = 'block';
                viewModeText.textContent = 'âœï¸ ç¼–è¾‘æ¨¡å¼';
                document.getElementById('htmlCode').value = editor.innerHTML;
            } else {
                editor.style.display = 'block';
                codeView.style.display = 'none';
                viewModeText.textContent = 'ğŸ‘ æŸ¥çœ‹HTMLä»£ç ';
                editor.innerHTML = document.getElementById('htmlCode').value;
                updateContent();
            }
        }

        // æ ¼å¼åŒ–æ–‡æœ¬
        function formatText(command, value = null) {
            document.execCommand(command, false, value);
            updateContent();
            document.getElementById('editor').focus();
        }

        // æ”¹å˜å­—ä½“å¤§å°
        function changeFontSize(size) {
            if (size) {
                formatText('fontSize', size);
            }
        }

        // æ”¹å˜æ–‡å­—é¢œè‰²
        function changeColor(color) {
            const editor = document.getElementById('editor');
            const selection = window.getSelection();
            
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                // å¦‚æœæœ‰é€‰ä¸­çš„æ–‡å­—ï¼Œåº”ç”¨é¢œè‰²åˆ°é€‰ä¸­å†…å®¹
                formatText('foreColor', color);
            } else {
                // å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡å­—ï¼Œè®¾ç½®å…‰æ ‡ä½ç½®çš„é¢œè‰²ï¼Œä»¥ä¾¿åç»­è¾“å…¥çš„æ–‡å­—ä½¿ç”¨è¯¥é¢œè‰²
                const range = document.createRange();
                range.selectNodeContents(editor);
                range.collapse(false); // ç§»åŠ¨åˆ°æœ«å°¾
                selection.removeAllRanges();
                selection.addRange(range);
                
                // åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é¢œè‰²çš„spanå…ƒç´ 
                const span = document.createElement('span');
                span.style.color = color;
                span.innerHTML = '\u200B'; // ä½¿ç”¨é›¶å®½ç©ºæ ¼
                
                range.insertNode(span);
                
                // å°†å…‰æ ‡ç§»åŠ¨åˆ°spanä¹‹å
                range.setStartAfter(span);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
            }
            
            updateContent();
            editor.focus();
        }
        
        // èƒŒæ™¯é¢œè‰²å‡½æ•°
        function changeBackgroundColor(color) {
            const editor = document.getElementById('editor');
            const selection = window.getSelection();
            
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                // å¦‚æœæœ‰é€‰ä¸­çš„æ–‡å­—ï¼Œåº”ç”¨èƒŒæ™¯é¢œè‰²åˆ°é€‰ä¸­å†…å®¹
                formatText('backColor', color);
            } else {
                // å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡å­—ï¼Œè®¾ç½®å…‰æ ‡ä½ç½®çš„èƒŒæ™¯é¢œè‰²
                const range = document.createRange();
                range.selectNodeContents(editor);
                range.collapse(false);
                selection.removeAllRanges();
                selection.addRange(range);
                
                const span = document.createElement('span');
                span.style.backgroundColor = color;
                span.innerHTML = '\u200B';
                
                range.insertNode(span);
                
                range.setStartAfter(span);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
            }
            
            updateContent();
            editor.focus();
        }

        // æ’å…¥ç¬¦å·
        function insertSymbol(symbol) {
            const editor = document.getElementById('editor');
            editor.focus();
            formatText('insertText', symbol);
        }
        
        // æ’å…¥é“¾æ¥å‡½æ•°
        function insertLink() {
            const url = prompt('è¯·è¾“å…¥é“¾æ¥åœ°å€ï¼š', 'https://');
            if (url && url !== 'https://') {
                formatText('createLink', url);
            }
        }
        
        // æ’å…¥å›¾ç‰‡å‡½æ•°
        function insertImage() {
            const url = prompt('è¯·è¾“å…¥å›¾ç‰‡åœ°å€ï¼š', 'https://');
            if (url && url !== 'https://') {
                const alt = prompt('è¯·è¾“å…¥å›¾ç‰‡æè¿°ï¼š', '');
                const img = `<img src="${url}" alt="${alt || 'å›¾ç‰‡'}" style="max-width: 100%; height: auto;">`;
                const editor = document.getElementById('editor');
                editor.focus();
                
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    range.deleteContents();
                    const fragment = range.createContextualFragment(img);
                    range.insertNode(fragment);
                }
                
                updateContent();
            }
        }

        // æ¸…é™¤æ ¼å¼
        function clearFormat() {
            const editor = document.getElementById('editor');
            const text = editor.innerText || editor.textContent;
            editor.innerHTML = text;
            updateContent();
        }

        // ä¿å­˜å†å²è®°å½•
        function saveHistory() {
            const editor = document.getElementById('editor');
            historyStep++;
            if (historyStep < history.length) {
                history.length = historyStep;
            }
            history.push(editor.innerHTML);
            // é™åˆ¶å†å²è®°å½•æ•°é‡
            if (history.length > 50) {
                history.shift();
                historyStep--;
            }
        }
        
        // æ’¤é”€æ“ä½œ
        function undo() {
            if (historyStep > 0) {
                historyStep--;
                const editor = document.getElementById('editor');
                editor.innerHTML = history[historyStep];
                updateContent();
            }
        }
        
        // é‡åšæ“ä½œ
        function redo() {
            if (historyStep < history.length - 1) {
                historyStep++;
                const editor = document.getElementById('editor');
                editor.innerHTML = history[historyStep];
                updateContent();
            }
        }
        
        // æ›´æ–°å†…å®¹å’Œå­—ç¬¦è®¡æ•°
        function updateContent() {
            const editor = document.getElementById('editor');
            const text = editor.innerText || editor.textContent || '';
            charCount = text.length;
            document.getElementById('charCount').textContent = charCount;
            
            if (isCodeView) {
                document.getElementById('htmlCode').value = editor.innerHTML;
            }
            
            // æ›´æ–°é¢„è§ˆ
            updatePreview();
        }
        
        // ä½¿ç”¨é˜²æŠ–å¤„ç†updateContent
        const debouncedUpdateContent = debounce(updateContent, 300);

        // å¤åˆ¶HTMLä»£ç 
        function copyHTML() {
            const htmlCode = document.getElementById('htmlCode');
            htmlCode.select();
            htmlCode.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                alert('HTMLä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            } catch (err) {
                // å¤‡ç”¨æ–¹æ¡ˆ
                navigator.clipboard.writeText(htmlCode.value).then(() => {
                    alert('HTMLä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                }).catch(() => {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶');
                });
            }
        }

        // æ·»åŠ å¯¼å‡ºåŠŸèƒ½
        function exportAsHTML() {
            const editor = document.getElementById('editor');
            const htmlContent = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¼å‡ºçš„æ–‡æ¡£</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }
    </style>
</head>
<body>
${editor.innerHTML}
</body>
</html>`;
            
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'document.html';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function exportAsText() {
            const editor = document.getElementById('editor');
            const textContent = editor.innerText || editor.textContent || '';
            const blob = new Blob([textContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'document.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'b':
                        e.preventDefault();
                        formatText('bold');
                        break;
                    case 'i':
                        e.preventDefault();
                        formatText('italic');
                        break;
                    case 'u':
                        e.preventDefault();
                        formatText('underline');
                        break;
                }
            }
        });
        
        // æŠ˜å å¼ä½¿ç”¨è¯´æ˜åŠŸèƒ½
        function toggleTips() {
            const content = document.getElementById('tipsContent');
            const toggle = document.getElementById('tipsToggle');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                toggle.classList.remove('expanded');
                toggle.textContent = 'â–¼';
            } else {
                content.classList.add('expanded');
                toggle.classList.add('expanded');
                toggle.textContent = 'â–²';
            }
        }
    </script>


</html>